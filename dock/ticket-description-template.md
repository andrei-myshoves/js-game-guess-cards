### Шаблон описания тикетов для веб‑разработки

Этот файл поможет формулировать задачи так, чтобы их можно было быстро понять, реализовать и принять в работу без лишних вопросов.

### Перечень блоков для описания тикетов

- **Заголовок и краткое описание**: одна фраза «что делаем» и зачем.
- **Контекст/Проблема**: почему эта задача нужна, текущие ограничения.
- **Цель/Результат**: ожидаемый эффект для пользователя/бизнеса.
- **Область работ (In/Out of scope)**: что делаем и чего не делаем в рамках задачи.
- **Требования**
  - **Функциональные**: детальное поведение, сценарии, состояния.
  - **Нефункциональные**: производительность, безопасность, устойчивость.
- **Дизайн/Макеты/Система дизайна**: ссылки на Figma, гайды, используемые компоненты.
- **Данные и API**: контракты, эндпоинты, схемы, источники данных, моки.
- **UX и a11y**: фокус‑стейт, управление с клавиатуры, screen reader, контраст.
- **Аналитика**: какие события отправляем, параметры, где и когда.
- **Локализация**: поддерживаемые языки, форматы дат/валют, ограничение длины строк.
- **Фича‑флаги/Эксперименты**: имя флага, аудитория, стратегия раскатки.
- **Совместимость**: браузеры, устройства, версии ОС, responsive точки.
- **Зависимости и риски**: внешние сервисы, блокеры, предположения.
- **План внедрения**: шаги выката, миграции, конфигурация, обратная совместимость.
- **План тестирования**: виды тестов (unit/e2e/скриншоты), критичные кейсы.
- **DoD — Критерии приемки**: измеримые пункты «готово», демо‑чеклист.
- **Мониторинг/Алертинг**: метрики, логи, SLO/SLA, дашборды.
- **Оценка и сроки**: трудозатраты, дедлайны, майлстоуны, риски по срокам.
- **Ответственные**: владелец, ревьюеры (код/дизайн/QA), контакт.

### Пример тикета

- **Заголовок**: Переключатель темы (светлая/тёмная) в шапке сайта
- **Краткое описание**: Добавить кнопку в хедере, которая мгновенно переключает тему страницы и запоминает выбор пользователя.
- **Контекст/Проблема**: Сейчас тема выбирается только из настроек ОС и не управляется из интерфейса. Пользователи просят явный переключатель.
- **Цель/Результат**: Увеличить контроль пользователя над интерфейсом, сократить жалобы на «не тот режим».
- **Область работ**
  - In scope: кнопка в хедере, моментальное переключение темы, сохранение предпочтения, синхронизация при следующем визите.
  - Out of scope: редизайн темы, изменение палитр, системные настройки браузера.
- **Требования**
  - Функциональные:
    - Кнопка‑тоггл видима на всех страницах в шапке.
    - Переключение темы применяется ко всей странице без перезагрузки.
    - Предпочтение сохраняется (localStorage с ключом `theme` или кука `theme=light|dark; max-age=...`).
    - При первом визите — используем `prefers-color-scheme`, затем — сохранённое значение.
  - Нефункциональные:
    - Переключение ≤100 мс на десктопе и ≤150 мс на мобильных.
- **Дизайн/Макеты**: Figma — «Header Theme Toggle v2» (`<ссылка>`), размеры/отступы/иконки из дизайн‑системы.
- **Данные и API**: Без внешних API. Только клиентское состояние и persistence (localStorage/кука).
- **UX и a11y**:
  - Кнопка фокусируется с клавиатуры, `Enter`/`Space` переключают.
  - ARIA: `role="switch"`, `aria-checked=true|false`, доступный `aria-label`.
  - Контраст иконок ≥ 4.5:1 в обеих темах.
- **Аналитика**:
  - Событие `ui_theme_toggle` со свойствами: `from`, `to`, `page`, `is_first_toggle`.
  - Отправка только по пользовательскому действию (не при автоприменении).
- **Фича‑флаги/Эксперименты**: Флаг `features.themeToggleHeader`, включение 100% после канареечного запуска 5%.
- **Совместимость**: Chrome/Edge/Firefox/Safari последних 2 версий, iOS/Android актуальные минорные.
- **Зависимости и риски**: Зависит от готовности токенов темы в дизайн‑системе. Риск «мигания» при первой отрисовке — требуется inline‑скрипт и класс на `html`.
- **План внедрения**:
  - Добавить атрибут‑токен `html[data-theme="dark"|"light"]`.
  - Inline‑скрипт в `<head>` читает сохранённую тему и ставит атрибут до загрузки стилей.
  - Компонент кнопки в хедере, подписка на изменение темы.
- **План тестирования**:
  - Unit: сохранение/чтение предпочтения, корректность переключения.
  - E2E: переключение на главной и внутренней странице; перезагрузка сохраняет выбор; клавиатурная навигация.
  - Скриншот‑тесты: обе темы для главных экранов.
- **DoD — Критерии приемки**:
  - Кнопка отображается на всех страницах и переключает тему без перезагрузки.
  - Предпочтение сохраняется и применяется при повторном визите до загрузки приложения (нет «мигания»).
  - Доступность: управляется с клавиатуры, корректные ARIA, фокус‑стейт видим.
  - Аналитика `ui_theme_toggle` уходит с полным набором параметров.
  - Покрытие: unit ≥ 70% по компоненту, e2e сценарии зелёные, скриншоты актуальны.
  - Кросс‑браузер: проверено на целевых версиях, багов нет.
  - Документация в README раздела UI обновлена.
- **Мониторинг/Алертинг**: Дашборд по частоте `ui_theme_toggle`, распределение тем, ошибки в консоли через фронтовый APM.
- **Оценка и сроки**: 1,5–2 дня разработки + 0,5 дня тестов.
- **Ответственные**: Исполнитель — Джун; ревью — Сеньор FE; QA — Имя.
